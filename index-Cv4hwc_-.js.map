{"version":3,"file":"index-Cv4hwc_-.js","sources":["../../src/drawCat.ts","../../src/assets/loading.png","../../src/assets/error_placeholder.png","../../src/main.ts"],"sourcesContent":["/* \r\n  Based on generate_sprite() from ClanGen:\r\n  https://github.com/ClanGenOfficial/clangen/blob/09a7c07772c3e33c6941b7a56b8cc5bfa83e316d/scripts/utility.py\r\n\r\n  ClanGen source code is licensed under MPL-2.0.\r\n*/\r\n\r\nimport { Pelt } from \"./types\";\r\nimport tints from \"./assets/tints/tint.json\";\r\nimport whitePatchesTints from \"./assets/tints/white_patches_tint.json\";\r\nimport peltInfo from \"./assets/peltInfo.json\";\r\n\r\nfunction getSpritePosition(spriteName: string, spriteNumber: number) {\r\n  return {\r\n    url: `sprites/split/${spriteName}_${spriteNumber}.png`,\r\n    x: 0,\r\n    y: 0,\r\n  };\r\n}\r\n\r\nasync function loadImage(url: string) {\r\n  return new Promise((resolve, reject) => {\r\n    const img = new Image();\r\n    img.src = url;\r\n\r\n    img.addEventListener(\"load\", () => {\r\n      resolve(img);\r\n    });\r\n    img.addEventListener(\"error\", () => {\r\n      reject(`${url} doesn't seem to exist!`);\r\n    })\r\n  });\r\n}\r\n\r\nasync function drawSprite(spriteName: string, spriteNumber: number, ctx: any) {\r\n  const spritePosition = getSpritePosition(spriteName, spriteNumber);\r\n\r\n  const img = await loadImage(spritePosition.url);\r\n  ctx.drawImage(img, spritePosition.x, spritePosition.y, 50, 50, 0, 0, 50, 50);\r\n}\r\n\r\nasync function drawTint(\r\n  tint: number[] | null,\r\n  blendingMode: \"multiply\" | \"lighter\",\r\n  ctx: any,\r\n) {\r\n  if (tint === null) {\r\n    return;\r\n  }\r\n  const cssTintColour = `rgb(${tint[0]} ${tint[1]} ${tint[2]})`\r\n\r\n  // we only want to tint non-transparent pixels\r\n  // so get version of the tint that's only over those pixels\r\n  const tintOverlay = new OffscreenCanvas(50, 50);\r\n  const tintOverlayContext = tintOverlay.getContext(\"2d\")!;\r\n  tintOverlayContext.drawImage(ctx.canvas, 0, 0);\r\n  tintOverlayContext.globalCompositeOperation = \"source-in\";\r\n  tintOverlayContext.fillStyle = cssTintColour;\r\n  tintOverlayContext.fillRect(0, 0, 50, 50);\r\n\r\n  // tinted version of the image required for the next step\r\n  const tintedLayer = new OffscreenCanvas(50, 50);\r\n  const tintedLayerContext = tintedLayer.getContext(\"2d\")!;\r\n  tintedLayerContext.drawImage(ctx.canvas, 0, 0);\r\n  tintedLayerContext.globalCompositeOperation = blendingMode;\r\n  tintedLayerContext.drawImage(tintOverlay, 0, 0);\r\n\r\n  // preserve the existing alpha channel\r\n  // this is necessary because otherwise semi-transparent pixels\r\n  // will get drawn twice\r\n  const compositeOperation = ctx.globalCompositeOperation;\r\n  ctx.globalCompositeOperation = \"source-in\";\r\n  ctx.drawImage(tintedLayer, 0, 0);\r\n  ctx.globalCompositeOperation = compositeOperation;\r\n}\r\n\r\nasync function drawMaskedSprite(\r\n  spriteName: string,\r\n  maskSpriteName: string,\r\n  spriteNumber: number,\r\n  ctx: any,\r\n) {\r\n  const offscreen = new OffscreenCanvas(50, 50);\r\n  const offscreenContext = offscreen.getContext(\"2d\");\r\n\r\n  if (offscreenContext !== null) {\r\n    await drawSprite(maskSpriteName, spriteNumber, offscreenContext);\r\n    offscreenContext.globalCompositeOperation = \"source-in\";\r\n    await drawSprite(spriteName, spriteNumber, offscreenContext);\r\n\r\n    ctx.drawImage(offscreen, 0, 0);\r\n  }\r\n}\r\n\r\nasync function drawShading(\r\n  spriteNumber: number,\r\n  ctx: any\r\n) {\r\n\r\n  const offscreen = new OffscreenCanvas(50, 50);\r\n  const offscreenContext = offscreen.getContext(\"2d\");\r\n\r\n  if (offscreenContext === null) {\r\n    return;\r\n  }\r\n\r\n  offscreenContext.drawImage(ctx.canvas, 0, 0);\r\n  offscreenContext.globalCompositeOperation = \"source-in\";\r\n  await drawSprite(\"shaders\", spriteNumber, offscreenContext);\r\n\r\n  const oldCompositeOperation = ctx.globalCompositeOperation;\r\n  ctx.globalCompositeOperation = \"multiply\";\r\n  ctx.drawImage(offscreen, 0, 0);\r\n  ctx.globalCompositeOperation = oldCompositeOperation;\r\n\r\n  await drawSprite(\"lighting\", spriteNumber, ctx);\r\n}\r\n\r\nasync function drawMissingScar(\r\n  spriteName: string,\r\n  spriteNumber: number,\r\n  ctx: any\r\n) {\r\n  const originalCompositeOperation = ctx.globalCompositeOperation;\r\n\r\n  // clip canvas to missing scar mask\r\n  // the missing mask goes \"under\" to not white-out the sprite,\r\n  // so it's destination-in\r\n  ctx.globalCompositeOperation = \"destination-in\";\r\n  await drawSprite(spriteName, spriteNumber, ctx);\r\n\r\n  // \"layer\" for the lines that go on top\r\n  // have to clip to the canvas to preserve transparency\r\n  const offscreenCanvas = new OffscreenCanvas(50, 50);\r\n  const offscreenContext = offscreenCanvas.getContext(\"2d\")!;\r\n  offscreenContext.drawImage(ctx.canvas, 0, 0);\r\n  offscreenContext.globalCompositeOperation = \"source-in\";\r\n  await drawSprite(spriteName, spriteNumber, offscreenContext);\r\n\r\n  // multiply so the white disappears\r\n  ctx.globalCompositeOperation = \"multiply\";\r\n  ctx.drawImage(offscreenCanvas, 0, 0);\r\n\r\n  ctx.globalCompositeOperation = originalCompositeOperation;\r\n}\r\n\r\nasync function drawCat(\r\n  outCanvas: OffscreenCanvas,\r\n  pelt: Pelt,\r\n  catSprite: number,\r\n  dead = false,\r\n  darkForest = false,\r\n  shading = false,\r\n  aprilFools = false,\r\n) {\r\n  const canvas = new OffscreenCanvas(50, 50);\r\n  const ctx = canvas.getContext(\"2d\");\r\n  const outCtx = outCanvas.getContext(\"2d\");\r\n\r\n  if (ctx === null || outCtx == null) {\r\n    return;\r\n  }\r\n\r\n  if (pelt.name !== \"Tortie\" && pelt.name !== \"Calico\") {\r\n    await drawSprite(`${pelt.spritesName}${pelt.colour}`, catSprite, ctx);\r\n  } else {\r\n    await drawSprite(`${pelt.tortieBase}${pelt.colour}`, catSprite, ctx);\r\n\r\n    var tortiePattern;\r\n    if (pelt.tortiePattern == \"Single\") {\r\n      tortiePattern = \"SingleColour\";\r\n    } else {\r\n      tortiePattern = pelt.tortiePattern;\r\n    }\r\n\r\n    await drawMaskedSprite(\r\n      `${tortiePattern}${pelt.tortieColour}`,\r\n      `tortiemask${pelt.pattern}`,\r\n      catSprite,\r\n      ctx,\r\n    );\r\n  }\r\n\r\n  if (\r\n    pelt.tint !== \"none\" &&\r\n    Object.keys(tints.tint_colours).includes(pelt.tint)\r\n  ) {\r\n    const tint = pelt.tint as keyof typeof tints.tint_colours;\r\n    await drawTint(tints.tint_colours[tint], \"multiply\", ctx);\r\n  }\r\n  if (\r\n    pelt.tint !== \"none\" &&\r\n    Object.keys(tints.dilute_tint_colours).includes(pelt.tint)\r\n  ) {\r\n    const tint = pelt.tint as keyof typeof tints.dilute_tint_colours;\r\n    await drawTint(tints.dilute_tint_colours[tint], \"lighter\", ctx);\r\n  }\r\n\r\n  if (pelt.whitePatches !== undefined) {\r\n    const offscreen = new OffscreenCanvas(50, 50);\r\n    const offscreenContext = offscreen.getContext(\"2d\");\r\n    await drawSprite(\r\n      `white${pelt.whitePatches}`,\r\n      catSprite,\r\n      offscreenContext,\r\n    );\r\n    if (\r\n      pelt.whitePatchesTint !== \"none\" &&\r\n      Object.keys(whitePatchesTints.tint_colours).includes(\r\n        pelt.whitePatchesTint,\r\n      )\r\n    ) {\r\n      const tint =\r\n        pelt.whitePatchesTint as keyof typeof whitePatchesTints.tint_colours;\r\n      await drawTint(\r\n        whitePatchesTints.tint_colours[tint],\r\n        \"multiply\",\r\n        offscreenContext,\r\n      );\r\n    }\r\n    ctx.drawImage(offscreen, 0, 0);\r\n  }\r\n  if (pelt.points !== undefined) {\r\n    const offscreen = new OffscreenCanvas(50, 50);\r\n    const offscreenContext = offscreen.getContext(\"2d\");\r\n    await drawSprite(`white${pelt.points}`, catSprite, offscreenContext);\r\n    if (\r\n      pelt.whitePatchesTint !== \"none\" &&\r\n      Object.keys(whitePatchesTints.tint_colours).includes(\r\n        pelt.whitePatchesTint,\r\n      )\r\n    ) {\r\n      const tint =\r\n        pelt.whitePatchesTint as keyof typeof whitePatchesTints.tint_colours;\r\n      await drawTint(\r\n        whitePatchesTints.tint_colours[tint],\r\n        \"multiply\",\r\n        offscreenContext,\r\n      );\r\n    }\r\n    ctx.drawImage(offscreen, 0, 0);\r\n  }\r\n  if (pelt.vitiligo !== undefined) {\r\n    await drawSprite(`white${pelt.vitiligo}`, catSprite, ctx);\r\n  }\r\n\r\n  await drawSprite(`eyes${pelt.eyeColour}`, catSprite, ctx);\r\n  if (pelt.eyeColour2 !== undefined) {\r\n    await drawSprite(`eyes2${pelt.eyeColour2}`, catSprite, ctx);\r\n  }\r\n\r\n  if (pelt.scars !== undefined) {\r\n    for (const scar of pelt.scars) {\r\n      if (peltInfo.scars1.includes(scar)) {\r\n        await drawSprite(`scars${scar}`, catSprite, ctx);\r\n      }\r\n      if (peltInfo.scars3.includes(scar)) {\r\n        await drawSprite(`scars${scar}`, catSprite, ctx);\r\n      }\r\n    }\r\n  }\r\n\r\n  if (shading) {\r\n    await drawShading(catSprite, ctx);\r\n  }\r\n\r\n  if (!aprilFools) {\r\n    if (dead) {\r\n      if (darkForest) {\r\n        await drawSprite(\"lineartdf\", catSprite, ctx);\r\n      } else {\r\n        await drawSprite(\"lineartdead\", catSprite, ctx);\r\n      }\r\n    } else {\r\n      await drawSprite(\"lines\", catSprite, ctx);\r\n    }\r\n  } else {\r\n    if (dead) {\r\n      if (darkForest) {\r\n        await drawSprite(\"aprilfoolslineartdf\", catSprite, ctx);\r\n      } else {\r\n        await drawSprite(\"aprilfoolslineartdead\", catSprite, ctx);\r\n      }\r\n    } else {\r\n      await drawSprite(\"aprilfoolslineart\", catSprite, ctx);\r\n    }\r\n  }\r\n\r\n  await drawSprite(`skin${pelt.skin}`, catSprite, ctx);\r\n\r\n  if (pelt.scars !== undefined) {\r\n    for (const scar of pelt.scars) {\r\n      if (peltInfo.scars2.includes(scar)) {\r\n        await drawMissingScar(`scars${scar}`, catSprite, ctx);\r\n      }\r\n    }\r\n  }\r\n\r\n  if (pelt.accessory !== undefined) {\r\n    if (peltInfo.plant_accessories.includes(pelt.accessory)) {\r\n      await drawSprite(`acc_herbs${pelt.accessory}`, catSprite, ctx);\r\n    } else if (peltInfo.wild_accessories.includes(pelt.accessory)) {\r\n      await drawSprite(`acc_wild${pelt.accessory}`, catSprite, ctx);\r\n    } else if (peltInfo.collars.includes(pelt.accessory)) {\r\n      await drawSprite(`collars${pelt.accessory}`, catSprite, ctx);\r\n    }\r\n  }\r\n\r\n  outCtx.clearRect(0, 0, outCanvas.width, outCanvas.height);\r\n  if (pelt.reverse) {\r\n    outCtx.scale(-1, 1);\r\n    outCtx.drawImage(canvas, -outCanvas.width, 0);\r\n    outCtx.resetTransform();\r\n  } else {\r\n    outCtx.drawImage(canvas, 0, 0);\r\n  }\r\n}\r\n\r\nexport default drawCat;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAkklEQVRoge3U3Q6AIAiAUWm9/yvTVX8KDiW3Lr6ztSVpAzJLAQAAAAAAWEiC83RpFq1oXpctOlFVm/F51bH6/rnei9XzR4ULsYjcjVPV1/h8biVnxUSkWT8iVUhGpvuWTwuJJud1PlPcPr3S4G2lCd5L3L039EW8H7g33+t+He8dDJHm/PX49cyfBgAAAAAAABkHA8JZ1WXUY1oAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAG3RFWHRTb2Z0d2FyZQBDZWxzeXMgU3R1ZGlvIFRvb2zBp+F8AAABfElEQVRoge2aSxqCMAyEyxFcedUeoVd15RFwpWJomjcGvs4KAwzz8yhtcVnXtVxBywRJpgmSTRMkm0wgtda1tbY45lFLDVJr/eyYAUYFsoUo5aQgEKIUHYj3FRWB9CBgGCrgyGO0HyU2CCcAFUjqIQFigWggYBAPj5FIEG0AGMLLB9MpQKBXT4eBQC8sGKdB6SkMxNqkYsfFfNOCYMdWg2CGlC4B4tll4cKEvBAvA4LJ2icb+YS+2TFJgFKDbEVBnQbkLUlPWQVyBIREh78Qo2QGabfHt/a8//x+1+B22zq2brQ9lLqv9dPJuz12B9nWIpa5EGKQT10RbHQiKBDzeIRzRSAcB7oH0vPhQriA9M42VceWd9t7jtmph70XpleHHpRPGMg/NEEw/QNG2lOeINEKASnFNm4/Ysyfdu43NYjUx73VkgbgBPH+vGAGaa0tmmnOlCCc9Rwvar+RzM1vBEjYFytuSO6Mh3bGfST1rcW59yUPu3V2cv7zIZte2ahDu0h3rfoAAAAASUVORK5CYII=\"","import './style.css'\r\nimport drawCat from './drawCat';\r\nimport loadingImg from \"./assets/loading.png\";\r\nimport errorImg from \"./assets/error_placeholder.png\";\r\n\r\nconst nameToSpritesname = {\r\n  \"SingleColour\": 'single',\r\n  'TwoColour': 'single',\r\n  'Tabby': 'tabby',\r\n  'Marbled': 'marbled',\r\n  'Rosette': 'rosette',\r\n  'Smoke': 'smoke',\r\n  'Ticked': 'ticked',\r\n  'Speckled': 'speckled',\r\n  'Bengal': 'bengal',\r\n  'Mackerel': 'mackerel',\r\n  'Classic': 'classic',\r\n  'Sokoke': 'sokoke',\r\n  'Agouti': 'agouti',\r\n  'Singlestripe': 'singlestripe',\r\n  'Masked': 'masked',\r\n  'Tortie': '',\r\n  'Calico': '',\r\n  'Amazon': 'amazon',\r\n  'Amoeba':'amoeba',\r\n  'Apple':'apple',\r\n  'Banana':'banana',\r\n  'Betta':'betta',\r\n  'Boba':'boba',\r\n  'Budgie':'budgie',\r\n  'Centipede':'centipede',\r\n  'Cherry':'cherry',\r\n  'Clay':'clay',\r\n  'Collared':'collared',\r\n  'Con':'con',\r\n  'Constellation':'constellation',\r\n  'Conure':'conure',\r\n  'Countershaded':'countershaded',\r\n  'CyanLizard':'cyanlizard',\r\n  'Daenix':'daenix',\r\n  'DarkEcho':'darkecho',\r\n  'Dragonet':'dragonet',\r\n  'Dragonfruit':'dragonfruit',\r\n  'Dreamer':'dreamer',\r\n  'Drizzle':'drizzle',\r\n  'Duskdawn':'duskdawn',\r\n  'Envoy':'envoy',\r\n  'Fire':'fire',\r\n  'Fizzy':'fizzy',\r\n  'Fluffy':'fluffy',\r\n  'Glitter':'glitter',\r\n  'Glowing':'glowing',\r\n  'Gravel':'gravel',\r\n  'Hypnotist':'hypnotist',\r\n  'Ice':'ice',\r\n  'Iggy':'iggy',\r\n  'Impish':'impish',\r\n  'Lantern':'lantern',\r\n  'Leafy':'leafy',\r\n  'Leviathan':'leviathan',\r\n  'LightEcho':'lightecho',\r\n  'Lizard':'lizard',\r\n  'Lovebird':'lovebird',\r\n  'Malibu':'malibu',\r\n  'Maned':'maned',\r\n  'Mold':'mold',\r\n  'Necklace':'necklace',\r\n  'Noble':'noble',\r\n  'OldGrowth':'oldgrowth',\r\n  'Patchwork':'patchwork',\r\n  'Pidgeon':'pidgeon',\r\n  'Plantain':'plantain',\r\n  'Ringed':'ringed',\r\n  'Robot':'robot',\r\n  'Rotten':'rotten',\r\n  'Rusted':'rusted',\r\n  'Salmon':'salmon',\r\n  'Scaled':'scaled',\r\n  'SeaSlug':'seaslug',\r\n  'Seer':'seer',\r\n  'Seltzer':'seltzer',\r\n  'Shred':'shred',\r\n  'Skeleton':'skeleton',\r\n  'Skinny':'skinny',\r\n  'SlimeMold':'slimemold',\r\n  'Solace':'solace',\r\n  'SparkleCat':'sparklecat',\r\n  'Sparse':'sparse',\r\n  'Spooky':'spooky',\r\n  'Sporty':'sporty',\r\n  'Sunken':'sunken',\r\n  'Sunset':'sunset',\r\n  'Swing':'swing',\r\n  'Sworn':'sworn',\r\n  'Tomo':'tomo',\r\n  'Vulture':'vulture',\r\n  'Watermelon':'watermelon',\r\n  'Whale':'whale',\r\n  'Wolf':'wolf',\r\n  'Yeek':'yeek',\r\n};\r\n\r\nconst catSprite = document.getElementById(\"cat-sprite-img\") as HTMLImageElement;\r\ncatSprite.src = loadingImg;\r\n\r\nconst spriteNumberSelect = document.getElementById(\"sprite-no-select\") as HTMLSelectElement;\r\nconst peltNameSelect = document.getElementById(\"pelt-name-select\") as HTMLSelectElement;\r\nconst colourSelect = document.getElementById(\"colour-select\") as HTMLSelectElement;\r\nconst tintSelect = document.getElementById(\"tint-select\") as HTMLSelectElement;\r\nconst skinColourSelect = document.getElementById(\"skin-colour-select\") as HTMLSelectElement;\r\nconst eyeColourSelect = document.getElementById(\"eye-colour-select\") as HTMLSelectElement;\r\nconst eyeColour2Select = document.getElementById(\"eye-colour2-select\") as HTMLSelectElement;\r\nconst accessorySelect = document.getElementById(\"accessory-select\") as HTMLSelectElement;\r\nconst scarSelect = document.getElementById(\"scar-select\") as HTMLSelectElement;\r\n\r\nconst whitePatchesSelect = document.getElementById(\"white-patches-select\") as HTMLSelectElement;\r\nconst pointsSelect = document.getElementById(\"points-select\") as HTMLSelectElement;\r\nconst whitePatchesTintSelect = document.getElementById(\"white-patches-tint-select\") as HTMLSelectElement;\r\nconst vitiligoSelect = document.getElementById(\"vitiligo-select\") as HTMLSelectElement;\r\n\r\nconst tortieMaskSelect = document.getElementById(\"tortie-mask-select\") as HTMLSelectElement;\r\nconst tortieColourSelect = document.getElementById(\"tortie-colour-select\") as HTMLSelectElement;\r\nconst tortiePatternSelect = document.getElementById(\"tortie-pattern-select\") as HTMLSelectElement;\r\n\r\nconst lineartSelect = document.getElementById(\"lineart-select\") as HTMLSelectElement;\r\n\r\nconst isTortieCheckbox = document.getElementById(\"tortie-checkbox\") as HTMLInputElement;\r\nconst shadingCheckbox = document.getElementById(\"shading-checkbox\") as HTMLInputElement;\r\nconst reverseCheckbox = document.getElementById(\"reverse-checkbox\") as HTMLInputElement;\r\n\r\nconst backgroundColourSelect = document.getElementById(\"bg-color-select\") as HTMLSelectElement;\r\n\r\nconst scaleSelect = document.getElementById(\"zoom-level\") as HTMLSelectElement;\r\n\r\nconst sharecodeTextArea = document.getElementById(\"sharecode\") as HTMLTextAreaElement;\r\n\r\nfunction getFormObject() {\r\n  return {\r\n    shading: shadingCheckbox.checked.toString(),\r\n    reverse: reverseCheckbox.checked.toString(),\r\n    isTortie: isTortieCheckbox.checked.toString(),\r\n\r\n    backgroundColour: backgroundColourSelect.value,\r\n    tortieMask: tortieMaskSelect.value,\r\n    tortieColour: tortieColourSelect.value,\r\n    tortiePattern: tortiePatternSelect.value,\r\n\r\n    peltName: peltNameSelect.value,\r\n    spriteNumber: spriteNumberSelect.value,\r\n    colour: colourSelect.value,\r\n    tint: tintSelect.value,\r\n    skinColour: skinColourSelect.value,\r\n    eyeColour: eyeColourSelect.value,\r\n    eyeColour2: eyeColour2Select.value,\r\n    whitePatches: whitePatchesSelect.value,\r\n    points: pointsSelect.value,\r\n    whitePatchesTint: whitePatchesTintSelect.value,\r\n    vitiligo: vitiligoSelect.value,\r\n    accessory: accessorySelect.value,\r\n    scar: scarSelect.value,\r\n\r\n    version: \"v1\"\r\n  }\r\n}\r\n\r\nfunction selectByValue(select: HTMLSelectElement, value: string) {\r\n  const options = select.options;\r\n  for (var i = 0; i < options.length; i++) {\r\n    const option = options.item(i)!;\r\n    if (option.value === value) {\r\n      select.selectedIndex = i;\r\n    }\r\n  }\r\n}\r\n\r\nfunction setFormFromObject(data: Record<string, any>) {\r\n  if (data.version === \"v1\") {\r\n    isTortieCheckbox.checked = data.isTortie === \"true\" ? true : false;\r\n    shadingCheckbox.checked = data.shading === \"true\" ? true : false;\r\n    reverseCheckbox.checked = data.reverse === \"true\" ? true : false;\r\n  \r\n    selectByValue(backgroundColourSelect, data.backgroundColour);\r\n    selectByValue(tortieMaskSelect, data.tortieMask);\r\n    selectByValue(tortieColourSelect, data.tortieColour);\r\n    selectByValue(tortiePatternSelect, data.tortiePattern);\r\n    selectByValue(peltNameSelect, data.peltName);\r\n    selectByValue(spriteNumberSelect, data.spriteNumber);\r\n    selectByValue(colourSelect, data.colour);\r\n    selectByValue(tintSelect, data.tint);\r\n    selectByValue(skinColourSelect, data.skinColour);\r\n    selectByValue(eyeColourSelect, data.eyeColour);\r\n    selectByValue(eyeColour2Select, data.eyeColour2);\r\n    selectByValue(whitePatchesSelect, data.whitePatches);\r\n    selectByValue(pointsSelect, data.points);\r\n    selectByValue(whitePatchesTintSelect, data.whitePatchesTint);\r\n    selectByValue(vitiligoSelect, data.vitiligo);\r\n    selectByValue(accessorySelect, data.accessory);\r\n    selectByValue(scarSelect, data.scar);\r\n  }\r\n}\r\n\r\nfunction getDataURL() {\r\n  const url = new URL(document.URL);\r\n\r\n  const params = new URLSearchParams(getFormObject());\r\n  return new URL(`${url.origin}${url.pathname}?${params}`);  \r\n}\r\n\r\nfunction applyDataURL() {\r\n  const params = new URLSearchParams(document.location.search);\r\n  const obj: Record<string, any> = {}\r\n  for (const [k, v] of params.entries()) {\r\n    obj[k] = v;\r\n  }\r\n  setFormFromObject(obj);\r\n\r\n  // don't want to reapply url or it adds to history twice\r\n  redrawCat(false);\r\n}\r\n\r\n/** \r\n * Redraws the cat sprite and applies the new sprite to the cat image\r\n * element on the page.\r\n * \r\n * @param applyURL {boolean} Whether or not to add the data URL representing \r\n * the current sprite to the history. \r\n * Should be true on form modification but false on page load to avoid\r\n * getting added to history twice.\r\n */\r\nfunction redrawCat(applyURL: boolean = true) {\r\n  const c = new OffscreenCanvas(50, 50);\r\n  const ctx = c.getContext(\"2d\");\r\n  if (ctx) {\r\n    ctx.clearRect(0, 0, c.width, c.height);\r\n  }\r\n\r\n  const backgroundColour = backgroundColourSelect.value;\r\n\r\n  // pattern - represents mask\r\n  const tortieMask = tortieMaskSelect.value;\r\n  // tortieColour - represents masked pelt colour\r\n  const tortieColour = tortieColourSelect.value;\r\n  // tortiePattern - represents masked pelt name\r\n  const tortiePattern = tortiePatternSelect.value as keyof typeof nameToSpritesname;\r\n\r\n  const peltName = peltNameSelect.value as keyof typeof nameToSpritesname;\r\n  const spriteNumber = Number(spriteNumberSelect.value);\r\n  const colour = colourSelect.value;\r\n  const tint = tintSelect.value;\r\n  const skinColour = skinColourSelect.value;\r\n  const eyeColour = eyeColourSelect.value;\r\n  const whitePatchesTint = whitePatchesTintSelect.value;\r\n  const eyeColour2 = eyeColour2Select.value === \"\" ? undefined : eyeColour2Select.value;\r\n  const whitePatches = whitePatchesSelect.value === \"\" ? undefined : whitePatchesSelect.value;\r\n  const points = pointsSelect.value === \"\" ? undefined : pointsSelect.value;\r\n  const vitiligo = vitiligoSelect.value === \"\" ? undefined : vitiligoSelect.value;\r\n  const accessory = accessorySelect.value === \"\" ? undefined : accessorySelect.value;\r\n  const scar = scarSelect.value === \"\" ? [] : [scarSelect.value];\r\n  const shading = shadingCheckbox.checked;\r\n  const reverse = reverseCheckbox.checked;\r\n\r\n  // we have to keep the original name (which is peltName) for spritesName,\r\n  // but we have to also tell \"name\" in Pelt that it's a tortie if it's a tortie\r\n  var name;\r\n  if (isTortieCheckbox.checked) {\r\n    name = \"Tortie\";\r\n  } else {\r\n    name = peltName;\r\n  }\r\n\r\n  if (isTortieCheckbox.checked) {\r\n    tortieColourSelect.disabled = false;\r\n    tortieMaskSelect.disabled = false;\r\n    tortiePatternSelect.disabled = false;\r\n  } else {\r\n    tortieColourSelect.disabled = true;\r\n    tortieMaskSelect.disabled = true;\r\n    tortiePatternSelect.disabled = true;\r\n  }\r\n\r\n  var isDead: boolean = false;\r\n  var isDf: boolean = false;\r\n  var aprilFools: boolean = false;\r\n  if (lineartSelect.value === \"regular\") {\r\n    isDead = false;\r\n    isDf = false;\r\n  } else if (lineartSelect.value === \"dead\") {\r\n    isDead = true;\r\n    isDf = false;\r\n  } else if (lineartSelect.value === \"dark forest\") {\r\n    isDead = true;\r\n    isDf = true;\r\n  } else if (lineartSelect.value === \"aprilfools-regular\") {\r\n    isDead = false;\r\n    isDf = false;\r\n    aprilFools = true;\r\n  } else if (lineartSelect.value === \"aprilfools-dead\") {\r\n    isDead = true;\r\n    isDf = false;\r\n    aprilFools = true;\r\n  } else if (lineartSelect.value === \"aprilfools-dark forest\") {\r\n    isDead = true;\r\n    isDf = true;\r\n    aprilFools = true;\r\n  }\r\n\r\n  // update share code\r\n  sharecodeTextArea.textContent = JSON.stringify({\r\n    pelt_name: name,\r\n    pelt_color: colour,\r\n    eye_colour: eyeColour,\r\n    eye_colour2: eyeColour2 === undefined ? null : eyeColour2,\r\n    reverse: reverse,\r\n    white_patches: whitePatches === undefined ? null : whitePatches,\r\n    vitiligo: vitiligo === undefined ? null : vitiligo,\r\n    points: points === undefined ? null : points,\r\n    white_patches_tint: whitePatchesTint,\r\n    pattern: name === \"Tortie\" ? tortieMask : null,\r\n    tortie_base: name === \"Tortie\" ? nameToSpritesname[peltName] : null,\r\n    tortie_pattern: name === \"Tortie\" ? nameToSpritesname[tortiePattern] : null,\r\n    tortie_color: name === \"Tortie\" ? tortieColour : null,\r\n    skin: skinColour,\r\n    tint: tint,\r\n    scars: scar,\r\n    accessory: accessory === undefined ? [] : [accessory],\r\n  }, undefined, 4);\r\n\r\n\r\n  const scale = Number(scaleSelect.value);\r\n  const canvasSize = scale * 50;\r\n\r\n  // set scale here so things aren't resizing\r\n  catSprite.width = canvasSize;\r\n  catSprite.height = canvasSize;\r\n\r\n  // if it's taking a while, show loading\r\n  var loaded = false;\r\n  setTimeout(() => {\r\n    if (!loaded) {\r\n      catSprite.src = loadingImg;\r\n    }\r\n  }, 200);\r\n  drawCat(c, {\r\n    name: name,\r\n    colour: colour,\r\n    skin: skinColour,\r\n    tint: tint,\r\n    whitePatchesTint: whitePatchesTint,\r\n    eyeColour: eyeColour,\r\n    eyeColour2: eyeColour2,\r\n    whitePatches: whitePatches,\r\n    points: points,\r\n    vitiligo: vitiligo,\r\n    spritesName: nameToSpritesname[peltName],\r\n    accessory: accessory,\r\n    scars: scar,\r\n    reverse: reverse,\r\n\r\n    tortieBase: nameToSpritesname[peltName],\r\n    pattern: tortieMask,\r\n    tortiePattern: nameToSpritesname[tortiePattern],\r\n    tortieColour: tortieColour,\r\n    },\r\n    spriteNumber,\r\n    isDead,\r\n    isDf,\r\n    shading,\r\n    aprilFools,\r\n  ).then(() => {\r\n    const finalCanvas = new OffscreenCanvas(canvasSize, canvasSize);\r\n    const finalCtx = finalCanvas.getContext(\"2d\")!;\r\n    finalCtx.imageSmoothingEnabled = false;\r\n\r\n    finalCtx.fillStyle = backgroundColour;\r\n    finalCtx.fillRect(0, 0, finalCanvas.width, finalCanvas.height);\r\n    finalCtx.scale(scale, scale);\r\n    finalCtx.drawImage(c, 0, 0);\r\n    \r\n    return finalCanvas.convertToBlob();\r\n  }).then((blob) => {\r\n    loaded = true;\r\n    catSprite.src = URL.createObjectURL(blob);\r\n\r\n    if (applyURL) {\r\n      const dataURL = getDataURL().toString();\r\n      history.pushState(null, \"\", dataURL);  \r\n    }\r\n  }).catch((err) => {\r\n    loaded = true;\r\n    catSprite.src = errorImg;\r\n    console.error(err);\r\n  });\r\n}\r\n\r\nfunction randomizeSelected(select: HTMLSelectElement) {\r\n  const options: HTMLOptionsCollection = select.options;\r\n  options.selectedIndex = Math.floor(options.length * Math.random());\r\n}\r\n\r\nconst randomButtons = document.getElementsByClassName(\"random-button\") as HTMLCollectionOf<HTMLButtonElement>;\r\nfor (const randomButton of randomButtons) {\r\n  randomButton.addEventListener(\"click\", (e) => {\r\n    e.preventDefault();\r\n    const selectId = randomButton.dataset.selectId;\r\n    if (!selectId) {\r\n      return;\r\n    }\r\n    const select = document.getElementById(selectId) as HTMLSelectElement;\r\n    randomizeSelected(select);\r\n    redrawCat();\r\n  });\r\n}\r\n\r\nisTortieCheckbox.addEventListener(\"change\", () => {\r\n  redrawCat();\r\n});\r\ntortieColourSelect.addEventListener(\"change\", () => redrawCat());\r\ntortieMaskSelect.addEventListener(\"change\", () => redrawCat());\r\ntortiePatternSelect.addEventListener(\"change\", () => redrawCat());\r\n\r\nspriteNumberSelect.addEventListener(\"change\", () => redrawCat());\r\npeltNameSelect.addEventListener(\"change\", () => redrawCat());\r\ncolourSelect.addEventListener(\"change\", () => redrawCat());\r\ntintSelect.addEventListener(\"change\", () => redrawCat());\r\nskinColourSelect.addEventListener(\"change\", () => redrawCat());\r\neyeColourSelect.addEventListener(\"change\", () => redrawCat());\r\neyeColour2Select.addEventListener(\"change\", () => redrawCat());\r\nwhitePatchesSelect.addEventListener(\"change\", () => redrawCat());\r\npointsSelect.addEventListener(\"change\", () => redrawCat());\r\nwhitePatchesTintSelect.addEventListener(\"change\", () => redrawCat());\r\nvitiligoSelect.addEventListener(\"change\", () => redrawCat());\r\naccessorySelect.addEventListener(\"change\", () => redrawCat());\r\nscarSelect.addEventListener(\"change\", () => redrawCat());\r\nlineartSelect.addEventListener(\"change\", () => redrawCat());\r\nshadingCheckbox.addEventListener(\"change\", () => redrawCat());\r\nreverseCheckbox.addEventListener(\"change\", () => redrawCat());\r\n\r\nbackgroundColourSelect.addEventListener(\"change\", () => redrawCat());\r\nscaleSelect.addEventListener(\"change\", () => redrawCat());\r\n\r\ndocument.getElementById(\"randomize-all-button\")?.addEventListener(\"click\", (e) => {\r\n  e.preventDefault();\r\n\r\n  randomizeSelected(spriteNumberSelect);\r\n  randomizeSelected(peltNameSelect);\r\n  randomizeSelected(colourSelect);\r\n  randomizeSelected(tortiePatternSelect);\r\n  randomizeSelected(tortieColourSelect);\r\n  randomizeSelected(tortieMaskSelect);\r\n  if (Math.random() <= 0.5) {\r\n    isTortieCheckbox.checked = true;\r\n  }\r\n  else {\r\n    isTortieCheckbox.checked = false;\r\n  }\r\n  randomizeSelected(tintSelect);\r\n  randomizeSelected(eyeColourSelect);\r\n  if (Math.random() <= 0.5) {\r\n    randomizeSelected(eyeColour2Select);\r\n  }\r\n  else {\r\n    eyeColour2Select.selectedIndex = 0;\r\n  }\r\n  randomizeSelected(skinColourSelect);\r\n\r\n  if (Math.random() <= 0.5) {\r\n    if (Math.random() <= 0.5) {\r\n      randomizeSelected(whitePatchesSelect);\r\n    } else {\r\n      whitePatchesSelect.selectedIndex = 0;\r\n    }\r\n    if (Math.random() <= 0.5) {\r\n      randomizeSelected(pointsSelect);\r\n    } else {\r\n      pointsSelect.selectedIndex = 0;\r\n    }\r\n    randomizeSelected(whitePatchesTintSelect);\r\n    if (Math.random() <= 0.5) {\r\n      randomizeSelected(vitiligoSelect);\r\n    } else {\r\n      vitiligoSelect.selectedIndex = 0;\r\n    }\r\n  } else {\r\n    whitePatchesTintSelect.selectedIndex = 0;\r\n    whitePatchesSelect.selectedIndex = 0;\r\n    pointsSelect.selectedIndex = 0;\r\n    vitiligoSelect.selectedIndex = 0;\r\n  }\r\n\r\n  if (Math.random() <= 0.5) {\r\n    randomizeSelected(accessorySelect);\r\n  } else {\r\n    accessorySelect.selectedIndex = 0;\r\n  }\r\n\r\n  if (Math.random() <= 0.5) {\r\n    randomizeSelected(scarSelect);\r\n  } else {\r\n    scarSelect.selectedIndex = 0;\r\n  }\r\n\r\n  if (Math.random() <= 0.5) {\r\n    reverseCheckbox.checked = true;\r\n  } else {\r\n    reverseCheckbox.checked = false;\r\n  }\r\n\r\n  redrawCat();\r\n});\r\n\r\nconst copyUrlButton = document.getElementById(\"copy-url-button\");\r\nif (\"clipboard\" in navigator) {\r\n  copyUrlButton?.addEventListener(\"click\", (e) => {\r\n    e.preventDefault();\r\n\r\n    navigator.clipboard.writeText(getDataURL().toString()).then(() => {\r\n      // temporarily change button text to say \"Copied!\"\r\n      copyUrlButton.textContent = \"Copied!\";\r\n      setTimeout(() => {\r\n        copyUrlButton.textContent = \"Copy this cat's URL\";\r\n      }, 1250);\r\n      });\r\n    });\r\n} else {\r\n  copyUrlButton?.classList.add(\"hidden\");\r\n}\r\n\r\naddEventListener(\"popstate\", () => {\r\n  applyDataURL();\r\n});\r\n\r\napplyDataURL();\r\n"],"names":["getSpritePosition","spriteName","spriteNumber","loadImage","url","resolve","reject","img","drawSprite","ctx","spritePosition","drawTint","tint","blendingMode","cssTintColour","tintOverlay","tintOverlayContext","tintedLayer","tintedLayerContext","compositeOperation","drawMaskedSprite","maskSpriteName","offscreen","offscreenContext","drawShading","oldCompositeOperation","drawMissingScar","originalCompositeOperation","offscreenCanvas","drawCat","outCanvas","pelt","catSprite","dead","darkForest","shading","aprilFools","canvas","outCtx","tortiePattern","tints","whitePatchesTints","scar","peltInfo","loadingImg","errorImg","nameToSpritesname","spriteNumberSelect","peltNameSelect","colourSelect","tintSelect","skinColourSelect","eyeColourSelect","eyeColour2Select","accessorySelect","scarSelect","whitePatchesSelect","pointsSelect","whitePatchesTintSelect","vitiligoSelect","tortieMaskSelect","tortieColourSelect","tortiePatternSelect","lineartSelect","isTortieCheckbox","shadingCheckbox","reverseCheckbox","backgroundColourSelect","scaleSelect","sharecodeTextArea","getFormObject","selectByValue","select","value","options","i","setFormFromObject","data","getDataURL","params","applyDataURL","obj","k","v","redrawCat","applyURL","c","backgroundColour","tortieMask","tortieColour","peltName","colour","skinColour","eyeColour","whitePatchesTint","eyeColour2","whitePatches","points","vitiligo","accessory","reverse","name","isDead","isDf","scale","canvasSize","loaded","finalCanvas","finalCtx","blob","dataURL","err","randomizeSelected","randomButtons","randomButton","selectId","_a","e","copyUrlButton"],"mappings":"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"}